{
	"etlJobDescriptors":[{
		"name": "processaccessrecord",
		"description": "This job processes the access records",
		"scriptLocation": "aws-glue.sagebase.org/scripts/",
		"scriptName": "process_access_record.py",
		"sourcePath" : "log.sagebase.org/accessRecord/",
		"tableDescriptor": {
			"name": "processedaccessrecord",
			"columns": {
				"session_id": "string",
				"timestamp": "timestamp",
				"user_id": "bigint",
				"method": "string",
				"request_url": "string",
				"user_agent": "string",
				"host": "string",
				"origin": "string",
				"x_forwarded_for": "string",
				"via": "string",
				"thread_id": "bigint",
				"elapse_ms": "bigint",
				"success" : "boolean",
				"stack": "string",
				"instance": "string",
				"vm_id": "string",
				"return_object_id": "string",
				"query_string": "string",
				"response_status": "bigint",
				"oauth_client_id": "string",
				"basic_auth_username": "string",
				"auth_method": "string",
				"normalized_method_signature": "string",
				"client": "string",
				"client_version": "string",
				"entity_id": "bigint"
			},
			"partitionKeys": {
				"year": "string",
				"month": "string",
				"day": "string"
			},
			"parameters": {
				"projection.enabled": "true",
				"projection.year.type": "integer",
				"projection.year.range": "2022,2033",
				"projection.year.interval": "1",
				"projection.year.digits": "4",
				"projection.month.type": "integer",
				"projection.month.range": "1,12",
				"projection.month.interval": "1",
				"projection.month.digits": "2",
				"projection.day.type": "integer",
				"projection.day.range": "1,31",
				"projection.day.interval": "1",
				"projection.month.digits": "2"
			}
		}
	},
	{
		"name": "nodesnapshots",
		"description": "This job processes the node snapshot data",
		"scriptLocation": "aws-glue.sagebase.org/scripts/",
		"scriptName": "node_snapshots.py",
		"sourcePath" : "log.sagebase.org/nodeSnapshots/",
		"tableDescriptor": {
			"name": "nodesnapshots",
			"columns": {
				"change_type": "string",
				"change_timestamp": "timestamp",
				"change_user_id": "bigint",
				"snapshot_timestamp": "timestamp",
				"id": "bigint",
				"benefactor_id": "bigint",
				"project_id": "bigint",
				"parent_id": "bigint",
				"node_type": "string",
				"created_on": "timestamp",
				"created_by": "bigint",
				"modified_on": "timestamp",
				"modified_by": "bigint",
				"version_number": "bigint",
				"file_handle_id": "bigint",
				"name": "string",
				"is_public": "boolean",
				"is_controlled": "boolean",
				"is_restricted": "boolean"
			},
			"partitionKeys": {
				"snapshot_date": "date"
			},
			"parameters": {
				"projection.enabled": "true",
				"projection.snapshot_date.type": "date",
				"projection.snapshot_date.range": "NOW-10YEARS,NOW",
				"projection.snapshot_date.format": "yyyy-MM-dd"
			}
		}
	},
	{
		"name": "filesnapshots",
		"description": "This job processes the file snapshot data",
		"scriptLocation": "aws-glue.sagebase.org/scripts/",
		"scriptName": "file_snapshots.py",
		"sourcePath" : "log.sagebase.org/fileSnapshots/",
		"tableDescriptor": {
			"name": "filesnapshots",
			"columns": {
				"change_type": "string",
				"change_timestamp": "timestamp",
				"change_user_id": "bigint",
				"snapshot_timestamp": "timestamp",
				"id": "bigint",
				"created_by": "bigint",
				"created_on": "timestamp",
				"modified_on": "timestamp",
				"concrete_type": "string",
				"content_md5": "string",
				"file_name": "string",
				"storage_location_id": "bigint",
				"content_size": "bigint",
				"bucket": "string",
				"key": "string",
				"preview_id": "bigint",
				"is_preview": "boolean",
				"status": "string"
			},
			"partitionKeys": {
				"snapshot_date": "date"
			},
			"parameters": {
				"projection.enabled": "true",
				"projection.snapshot_date.type": "date",
				"projection.snapshot_date.range": "NOW-10YEARS,NOW",
				"projection.snapshot_date.format": "yyyy-MM-dd"
			}
		}
	}]
}